<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace=" ">
	<select id="selectAllAI" resultType="dto2">
		select * from assembleInfo
	</select>
	<select id="selectAll" resultType="dto">
		select * from memberInfo
	</select>
	
	<!-- AssembleMember Table insert 어셈블 개설 -->
	<insert id="insertOneAM" parameterType="dto" >
		insert into assembleMember(memID, assembleName)
		values (#{mi_memID}, #{mi_assembleName})
	</insert>
	<insert id="insertOneAssemble" parameterType="dto">
		insert into assembleInfo
		values (#{mi_assembleName}, (select memberNo from assembleMember where memId= #{mi_memID} AND assembleName = #{mi_assembleName}), #{mi_memID}, now())
	</insert>
	
	<!-- MemberInfo Table insert 어셈블 개설 -->
	<insert id="insertOneMIAdmin" parameterType="dto">
		insert into memberInfo
		values (#{mi_assembleName}, (select memberNo from assembleMember where memId= #{mi_memID} AND assembleName = #{mi_assembleName}), #{mi_memID}, #{mi_memPw}, #{mi_memEmail}, 1, now(), #{mi_memName})
	</insert>
	
	<select id="selectAssembleName" resultType="String">
		select mi_assembleName from memberinfo
		where mi_assembleName = #{mi_assembleName}
	</select>
	
	<select id="selectIdEncode" resultType="dto1" parameterType="dto1">
		select mi_memberNo, mi_assembleName, mi_memID, mi_memPw from memberInfo
		where mi_memID = #{mi_memID} AND mi_assembleName = #{mi_assembleName}
	</select>

	
	
</mapper>